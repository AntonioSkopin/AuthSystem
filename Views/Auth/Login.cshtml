@model AuthenticateModel

@{
    ViewData["Title"] = "Login";
}

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>

<div>
    <h1 class="display-4">Welkom terug!</h1>
    <form method="post" autocomplete="off">
        <div class="form-group">
            <label for="usernameInput">Username:</label>
            <input class="form-control" type="text" id="username" />
        </div>
        <div class="form-group">
            <label for="passwordInput">Password</label>
            <input class="form-control" type="password" id="password" />
            <small id="passwordHelp" class="form-text text-muted">Ik zal je wachtwoord nooit ergens opslaan.</small>
        </div>
        <button id="login-btn" type="button" class="btn btn-primary">Log in</button>
    </form>
    <br />
    <div id="loginResult" class=""></div>

    <script type="text/jscript">
        $("#login-btn").click(function () {
            var url = "https://localhost:44306/Auth/Authenticate";
            var usernameInpt = $("#username").val();
            var passwordInpt = $("#password").val();
            $.post(url, { username: usernameInpt, password: passwordInpt }, function (data) {
                if (data == null) {
                    $("#loginResult").removeClass("alert alert-success");
                    $("#loginResult").addClass("alert alert-danger");
                    $("#loginResult").html("Onjuiste gegevens! Probeer het opnieuw!");
                } else {
                    $("#loginResult").removeClass("alert alert-danger");
                    $("#loginResult").addClass("alert alert-success");
                    $("#loginResult").html("Succesvol ingelogd als " + data + "!");
                }
            });
        });
    </script>
</div>